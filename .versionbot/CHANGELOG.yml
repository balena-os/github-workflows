- commits:
    - subject: Update Pin dependencies
      hash: 358b51b23e0901f3451439efacaa5d44f56cf537
      body: |
        Update actions-ecosystem/action-get-latest-tag
      footer:
        Change-type: patch
        change-type: patch
      author: balena-renovate[bot]
      nested: []
  version: 0.1.2
  title: ""
  date: 2026-01-23T17:06:23.949Z
- commits:
    - subject: "renovate: Fix broken config"
      hash: 308a42e7b010b84479c4febdb82533b64eeb4ea3
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Kyle Harding <kyle@balena.io>
        signed-off-by: Kyle Harding <kyle@balena.io>
      author: Kyle Harding
      nested: []
  version: 0.1.1
  title: ""
  date: 2026-01-23T17:02:20.936Z
- commits:
    - subject: "ESR: Use GitHub REST API for verified commits with submodule support"
      hash: 141cc22cfdf463289ca8d5636a8fc17d7b279e9f
      body: |
        Replace local git commands with GitHub REST API calls to create verified
        (signed) commits from the GitHub App bot. This approach properly handles
        the meta-balena submodule which requires mode 160000 and type commit in
        tree entries.

        Changes:
        - Switch to actions/create-github-app-token for token generation
        - Use GitHub API for all git operations:
          - getRef with 404 handling to check branch existence
          - createRef to create branch before committing
          - createBlob/createTree for files and submodule
          - createCommit and updateRef for the versioned commit
          - createTag and createRef for the annotated tag
        - Remove GIT_AUTHOR/COMMITTER env vars (API uses app identity)
        - Add ESR_BOT_PRIVATE_KEY as required workflow secret
        - Split monolithic step into focused, documented steps
      footer:
        Change-type: minor
        change-type: minor
        Signed-off-by: Kyle Harding <kyle@balena.io>
        signed-off-by: Kyle Harding <kyle@balena.io>
      author: Kyle Harding
      nested: []
  version: 0.1.0
  title: ""
  date: 2026-01-20T09:37:12.404Z
- commits:
    - subject: "CI: Update checkout settings"
      hash: d9b6c41acd9e8864279f5c2d197ba2ea2e866bf8
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Pagan Gazzard
      nested: []
  version: 0.0.28
  title: ""
  date: 2024-09-27T19:37:32.963Z
- commits:
    - subject: "workflows: esr: qualify ESR branch matching patterns"
      hash: 5306efefe48d99daf2d9856f661417998c18fb62
      body: |
        Make the meta-balena ESR branch pattern start with a digit to limit
        clashes with random branches.

        Also, sort matches by version instead of committer date as it may be
        the case that an older ESR branch gets newer commits.
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 0.0.27
  title: ""
  date: 2024-03-02T16:22:06.891Z
- commits:
    - subject: "esr: use workflows syntax for inputs"
      hash: 784aafc05dbdcab69c05e1f7fcdfd8e483b40d77
      body: |
        On workflow dispatch actions, the inputs are access via the event
        context.
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 0.0.26
  title: ""
  date: 2024-03-02T15:26:47.191Z
- commits:
    - subject: "esr: qualify ESR base tag to start with base version"
      hash: 130834844003e52b933c4e2ca9e10d8d6a0fbb56
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 0.0.25
  title: ""
  date: 2024-03-02T14:07:48.621Z
- commits:
    - subject: Update git author to match bot
      hash: 9f01e2722dc1d119ac252b09988218912677830e
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Kyle Harding <kyle@balena.io>
        signed-off-by: Kyle Harding <kyle@balena.io>
      author: Kyle Harding
      nested: []
  version: 0.0.24
  title: ""
  date: 2023-10-02T16:57:22.603Z
- commits:
    - subject: "workflows: Switch to balenaOS ESR [bot] for authentication Flowzone
        App no longer has workflow:write permissions for security reasons."
      hash: 6a7caa5630af7b40b7c44217fe2ac4598f670fa7
      body: >
        This new balenaOS ESR bot has contents:write and workflows:write
        permissions

        but is only available on balenaOS repositories.
      footer:
        See: https://github.com/apps/balenaos-esr
        see: https://github.com/apps/balenaos-esr
        Change-type: patch
        change-type: patch
        Signed-off-by: Kyle Harding <kyle@balena.io>
        signed-off-by: Kyle Harding <kyle@balena.io>
      author: Kyle Harding
      nested: []
  version: 0.0.23
  title: ""
  date: 2023-10-02T16:46:33.903Z
- commits:
    - subject: build_and_deploy:use authenticate curl to status url
      hash: 9994158d341bbbd05cbf497ed58506a04e0ec37e
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Ryan Cooke <ryan@balena.io>
        signed-off-by: Ryan Cooke <ryan@balena.io>
      author: rcooke-warwick
      nested: []
  version: 0.0.22
  title: ""
  date: 2023-09-18T14:20:26.507Z
- commits:
    - subject: Remove excessive permissions from app token
      hash: e527d8d98be53229408dfcd33b8bdff8717d4fab
      body: |
        These permissions have already been removed from
        flowzone-app[bot] so requesting them at runtime will fail.
      footer:
        Change-type: patch
        change-type: patch
      author: Kyle Harding
      nested: []
  version: 0.0.21
  title: ""
  date: 2023-08-01T17:51:31.739Z
- commits:
    - subject: ".github/workflows: Replace GitHub PAT with ephemeral app tokens"
      hash: 57c3bf0a84bfdeaf6cacde39b314c9c23a9fa64d
      body: |
        GitHub App installation tokens are short-lived and do not
        need to be rotated the same way PATs do.

        The default app ID and installation ID correspond to
        flowzone-bot[app] installed in the balena-os Org.
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Kyle Harding <kyle@balena.io>
        signed-off-by: Kyle Harding <kyle@balena.io>
      author: Kyle Harding
      nested: []
  version: 0.0.20
  title: ""
  date: 2023-07-14T13:23:20.193Z
- commits:
    - subject: "esr: fix pattern for multi-digit revisions"
      hash: 3b83d9233df1dc4d890795950f445d8b6ef09af5
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 0.0.19
  title: ""
  date: 2023-04-21T10:10:37.250Z
- commits:
    - subject: "workflows: esr: use semver versioning"
      hash: 62dfc224e41b14c421cb3ba70254da746eda2b36
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 0.0.18
  title: ""
  date: 2023-01-14T19:29:29.875Z
- commits:
    - subject: "esr: remove dispatch event from re-usable workflow"
      hash: cc9f80d04b0c49eb633b89bdd4a412e773ea4cce
      body: |
        The dispatch event belongs on the calling workflows.
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 0.0.17
  title: ""
  date: 2023-01-10T15:04:36.220Z
- commits:
    - subject: "esr: Allow it to be re-usable"
      hash: 86a3b55bf2277b011b4222bf55c599816c3cc9dc
      body: |
        Add a workflow_call on event so it can be reused by multiple device
        repositories.
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 0.0.16
  title: ""
  date: 2023-01-10T14:45:11.838Z
- commits:
    - subject: "esr: Removed schedule"
      hash: 532efe6be99343bdf27b05a7fd81a63dc056bcb6
      body: |
        The on schedule will be set on each device repository that uses this
        workflow.
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 0.0.15
  title: ""
  date: 2022-11-03T14:58:53.868Z
- commits:
    - subject: Add ESR workflow
      hash: 606000d8439c6c97cc4a8dd95431fbadbd1251d8
      body: |
        This workflow will create an ESR branch every quarter.
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 0.0.14
  title: ""
  date: 2022-11-03T14:45:30.120Z
- commits:
    - subject: Switch balenaCI to flowzone
      hash: dbb331c6f18e61fde120e4ba527c6dca1fd2c1a8
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 0.0.13
  title: ""
  date: 2022-11-03T14:39:06.824Z
- version: 0.0.12
  date: 2022-10-10T17:07:45Z
  commits:
    - hash: a6a9c51d25948a3aea49842329933feef2984b22
      author: Alex Gonzalez
      footers:
        change-type: patch
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      subject: "workflows: build_and_deploy: use a single prefix for test jobs"
      body: >-
        Test jobs used to be prefixed by either `testbot` or `qemu` to represent

        either physical or virtual environments.

        This change uses a customizable unique job prefix that defaults to
        `test`

        that will be used to define whether to release as final, abstracting the

        actual run environment from the decision.
- version: 0.0.11
- date: 2022-10-10T10:00:24Z
- commits:
    - hash: 9b84fd9edabb81f9aa3b5ca679132a681f63f85b
- commits:
    - author: Alex Gonzalez
- commits:
    - footers:
        change-type: patch
- commits:
    - footers:
        signed-off-by: Alex Gonzalez <alexg@balena.io>
- commits:
    - subject: "build_and_deploy: Identify merge commit after checking out latest tag"
- commits:
    - body: |-
        There has been race conditions where the merge commit found did not
        correspond to the merged tag, so make sure the repository is at the
        place we expect it to be before looking for the last merge commit.
- commits:
    - hash: 74c2ea464e1cc07b8d7c33c954ad6de53a5c25d6
- commits:
    - author: Alex Gonzalez
- commits:
    - footers:
        change-type: patch
- commits:
    - footers:
        signed-off-by: Alex Gonzalez <alexg@balena.io>
- commits:
    - subject: "build_and_deploy: add workerType input argument"
- commits:
    - body: |-
        This allows to configure the deploy job names as
        `<workerType>-<machine-name>`.
- commits:
    - hash: 10b6def9f683e4cbc7d5b8cc504c5c581a686bcf
- commits:
    - author: Alex Gonzalez
- commits:
    - footers:
        change-type: patch
- commits:
    - footers:
        signed-off-by: Alex Gonzalez <alexg@balena.io>
- commits:
    - subject: "build_and_deploy: Add description to deployTo input argument"
- commits:
    - body: null
- version: 0.0.10
- date: 2022-08-02T09:17:45Z
- commits:
    - hash: 19f4df88f0ce66bf674dc3c6e1bcbf84dbff2372
- commits:
    - author: Alex Gonzalez
- commits:
    - footers:
        change-type: patch
- commits:
    - footers:
        signed-off-by: Alex Gonzalez <alexg@balena.io>
- commits:
    - subject: "build_and_deploy: Ammend debug message"
- commits:
    - body: Aesthetic change to clear the debug message.
- version: 0.0.9
- date: 2022-07-18T13:05:18Z
- commits:
    - hash: d644434080914e804a3eb1cd3b799b25a630b5a5
- commits:
    - author: Alex Gonzalez
- commits:
    - footers:
        change-type: patch
- commits:
    - footers:
        signed-off-by: Alex Gonzalez <alexg@balena.io>
- commits:
    - subject: "build_and_deploy: Set final flag according to tests status"
- commits:
    - body: >-
        We can navigate from the commit triggering the deploy event to the
        merged

        pull request before the tag, and check the statuses for a specific board

        to see if the tests are passed.

        We can then use that to deploy a final release.
- version: 0.0.8
- date: 2022-07-15T09:28:59Z
- commits:
    - hash: b08e5fbe03ee0c192607fc51b0a45cf320c509da
- commits:
    - author: Alex Gonzalez
- commits:
    - footers:
        change-type: patch
- commits:
    - footers:
        signed-off-by: Alex Gonzalez <alexg@balena.io>
- commits:
    - subject: "build_and_deploy: Keep waiting for jobs to complete"
- commits:
    - body: |-
        Using the Yocto cache jobs take between 10/15' to complete, and it's
        nice to see workflow status reflecting the builds output.
        Unless the hosted processing time spikes up let's keep this setting.
- version: 0.0.7
- date: 2022-07-12T14:25:09Z
- commits:
    - hash: 0f86c61b79310e542a5bc9486004915384bc309d
- commits:
    - author: Alex Gonzalez
- commits:
    - footers:
        change-type: patch
- commits:
    - footers:
        signed-off-by: Alex Gonzalez <alexg@balena.io>
- commits:
    - subject: Do not wait for Jenkins jobs to complete
- commits:
    - body: |-
        Waiting for long running Jenkins jobs to complete is a waste of github
        hosted processing time.
- version: 0.0.6
- date: 2022-07-08T12:12:01Z
- commits:
    - hash: 136acb007187c74a9aef5b7c90371a3034026ea3
- commits:
    - author: Alex Gonzalez
- commits:
    - footers:
        change-type: patch
- commits:
    - footers:
        signed-off-by: Alex Gonzalez <alexg@balena.io>
- commits:
    - subject: "build_and_deploy: Adapt for ESR releases"
- commits:
    - body: |-
        Parse the latest tag and call an ESR deploy job if it matches an ESR
        tag.
- version: 0.0.5
- date: 2022-05-27T17:36:18Z
- commits:
    - hash: 3cb115a6350f78003a88cf80ab7ab3c4aecc757c
- commits:
    - author: Alex Gonzalez
- commits:
    - footers:
        change-type: patch
- commits:
    - footers:
        signed-off-by: Alex Gonzalez <alexg@balena.io>
- commits:
    - subject: "workflows: build_and_deploy: Pull action from balena-os"
- commits:
    - body: |-
        Stop using a fork in my personal repository and use a fork in balena-os
        instead. Once my PR to the upstream repo is merged, we can revert to
        using upstream.
- version: 0.0.4
- date: 2022-05-27T17:17:18Z
- commits:
    - hash: 11ed17ed7e3944ad3ec2c1510fea4d30121f2e47
- commits:
    - author: Alex Gonzalez
- commits:
    - footers:
        change-type: patch
- commits:
    - footers:
        signed-off-by: Alex Gonzalez <alexg@balena.io>
- commits:
    - subject: "workflows: build_and_deploy: Parametrize environment and finalize"
- commits:
    - body: |-
        Allow the caller to specify the cloud environment to deploy to as well
        as whether to finalize the release.
- version: 0.0.3
- date: 2022-05-27T14:36:39Z
- commits:
    - hash: f3bc033100b32a4eece41c373ab19268d787864d
- commits:
    - author: Alex Gonzalez
- commits:
    - footers:
        change-type: patch
- commits:
    - footers:
        signed-off-by: Alex Gonzalez <alexg@balena.io>
- commits:
    - subject: "build_and_deploy: Don't specify the on events, and require secrets
        input"
- commits:
    - body: |-
        Let the caller specify both the on event and the workflow_dispatch that
        allows running it from the github repository actions tab.
        Also, pass the secrets for the caller.
- version: 0.0.2
- date: 2022-05-27T13:55:43Z
- commits:
    - hash: 947e249f8466af4bcaf04ffe277e2f71012b9cfb
- commits:
    - author: Alex Gonzalez
- commits:
    - footers:
        change-type: patch
- commits:
    - footers:
        signed-off-by: Alex Gonzalez <alexg@balena.io>
- commits:
    - subject: Add build_and_deploy workflow
- commits:
    - body: |-
        This is to be used by device types to automatically build and deploy
        releases on repository tagging.
